/* empty css              */import{ab as Y,g as R,V as E,aa as q,S as j,A as J,a0 as K,P as Q,W as Z,ap as $,a9 as ee,c as te,al as ne,L as ie}from"./three.module-d5fa3ebf.js";import{O as oe}from"./OrbitControls-5742bab2.js";import{S as se}from"./Stats-ef6ecf20.js";import{G as re}from"./GLTFLoader-3c7b0d3d.js";class ae extends Y{constructor(o=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=o,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new R(.5,.5),this.addEventListener("removed",function(){this.traverse(function(i){i.element instanceof Element&&i.element.parentNode!==null&&i.element.parentNode.removeChild(i.element)})})}copy(o,i){return super.copy(o,i),this.element=o.element.cloneNode(!0),this.center=o.center,this}}const f=new E,A=new q,P=new q,T=new E,k=new E;class de{constructor(o={}){const i=this;let l,S,L,O;const D={objects:new WeakMap},h=o.element!==void 0?o.element:document.createElement("div");h.style.overflow="hidden",this.domElement=h,this.getSize=function(){return{width:l,height:S}},this.render=function(e,n){e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),n.parent===null&&n.matrixWorldAutoUpdate===!0&&n.updateMatrixWorld(),A.copy(n.matrixWorldInverse),P.multiplyMatrices(n.projectionMatrix,A),_(e,e,n),I(e)},this.setSize=function(e,n){l=e,S=n,L=l/2,O=S/2,h.style.width=e+"px",h.style.height=n+"px"};function _(e,n,a){if(e.isCSS2DObject){f.setFromMatrixPosition(e.matrixWorld),f.applyMatrix4(P);const r=e.visible===!0&&f.z>=-1&&f.z<=1&&e.layers.test(a.layers)===!0;if(e.element.style.display=r===!0?"":"none",r===!0){e.onBeforeRender(i,n,a);const v=e.element;v.style.transform="translate("+-100*e.center.x+"%,"+-100*e.center.y+"%)translate("+(f.x*L+L)+"px,"+(-f.y*O+O)+"px)",v.parentNode!==h&&h.appendChild(v),e.onAfterRender(i,n,a)}const c={distanceToCameraSquared:U(a,e)};D.objects.set(e,c)}for(let r=0,c=e.children.length;r<c;r++)_(e.children[r],n,a)}function U(e,n){return T.setFromMatrixPosition(e.matrixWorld),k.setFromMatrixPosition(n.matrixWorld),T.distanceToSquared(k)}function V(e){const n=[];return e.traverse(function(a){a.isCSS2DObject&&n.push(a)}),n}function I(e){const n=V(e).sort(function(r,c){if(r.renderOrder!==c.renderOrder)return c.renderOrder-r.renderOrder;const v=D.objects.get(r).distanceToCameraSquared,X=D.objects.get(c).distanceToCameraSquared;return v-X}),a=n.length;for(let r=0,c=n.length;r<c;r++)n[r].element.style.zIndex=a-r}}}const y=document.querySelector("#app"),m=new j;m.add(new J(5));const C=new K;C.position.set(12.5,12.5,12.5);C.castShadow=!0;C.shadow.mapSize.width=1024;C.shadow.mapSize.height=1024;m.add(C);const p=new Q(75,window.innerWidth/window.innerHeight,.1,1e3);p.position.set(15,15,15);const d=new Z;d.shadowMap.enabled=!0;d.outputEncoding=$;d.setSize(window.innerWidth,window.innerHeight);y==null||y.appendChild(d.domElement);const w=new de;w.setSize(window.innerWidth,window.innerHeight);w.domElement.style.position="absolute";w.domElement.style.top="0px";w.domElement.style.pointerEvents="none";document.body.appendChild(w.domElement);const z=new oe(p,d.domElement);z.enableDamping=!0;const F=[],le=new re;le.load("/assets/models/simplescene.glb",function(t){t.scene.traverse(function(o){if(o.isMesh){const i=o;switch(i.name){case"Plane":i.receiveShadow=!0;break;default:i.castShadow=!0}F.push(i)}}),m.add(t.scene)},t=>{console.log(t.loaded/t.total*100+"% loaded")},t=>{console.log(t)});window.addEventListener("resize",ce,!1);function ce(){p.aspect=window.innerWidth/window.innerHeight,p.updateProjectionMatrix(),d.setSize(window.innerWidth,window.innerHeight),w.setSize(window.innerWidth,window.innerHeight),N()}let H=!1,g=0,u,x=!1;const b={};window.addEventListener("keydown",function(t){t.key==="Control"&&(H=!0,z.enabled=!1,d.domElement.style.cursor="crosshair")});window.addEventListener("keyup",function(t){t.key==="Control"&&(H=!1,z.enabled=!0,d.domElement.style.cursor="pointer",x&&(m.remove(u),m.remove(b[g]),x=!1))});const W=new ee;let s;const M=new R;d.domElement.addEventListener("pointerdown",me,!1);function me(){if(H&&(W.setFromCamera(M,p),s=W.intersectObjects(F,!1),s.length>0))if(x){const t=u.geometry.attributes.position.array;t[3]=s[0].point.x,t[4]=s[0].point.y,t[5]=s[0].point.z,u.geometry.attributes.position.needsUpdate=!0,g++,x=!1}else{const t=[];t.push(s[0].point),t.push(s[0].point.clone());const o=new te().setFromPoints(t);u=new ne(o,new ie({color:16777215,transparent:!0,opacity:.75})),u.frustumCulled=!1,m.add(u);const i=document.createElement("div");i.className="measurementLabel",i.innerText="0.0m";const l=new ae(i);l.position.copy(s[0].point),b[g]=l,m.add(b[g]),x=!0}}document.addEventListener("mousemove",ue,!1);function ue(t){if(t.preventDefault(),M.x=t.clientX/window.innerWidth*2-1,M.y=-(t.clientY/window.innerHeight)*2+1,x&&(W.setFromCamera(M,p),s=W.intersectObjects(F,!1),s.length>0)){const o=u.geometry.attributes.position.array,i=new E(o[0],o[1],o[2]),l=new E(s[0].point.x,s[0].point.y,s[0].point.z);o[3]=s[0].point.x,o[4]=s[0].point.y,o[5]=s[0].point.z,u.geometry.attributes.position.needsUpdate=!0;const S=i.distanceTo(l);b[g].element.innerText=S.toFixed(2)+"m",b[g].position.lerpVectors(i,l,.5)}}const B=new se;y==null||y.appendChild(B.dom);function G(){requestAnimationFrame(G),z.update(),N(),B.update()}function N(){w.render(m,p),d.render(m,p)}G();
