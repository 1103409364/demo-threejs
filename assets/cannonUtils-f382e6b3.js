import{V as u}from"./three.module-d5fa3ebf.js";import{T as b,V as d,C as w}from"./cannon-es-36f8ef45.js";class A{static CreateTrimesh(n){let e;n.index===null?e=n.attributes.position.array:e=n.clone().toNonIndexed().attributes.position.array;const r=Object.keys(e).map(Number);return new b(e,r)}static CreateConvexPolyhedron(n){const e=n.attributes.position,r=n.attributes.normal,s=[];for(let t=0;t<e.count;t++)s.push(new u().fromBufferAttribute(e,t));const f=[];for(let t=0;t<e.count;t+=3){const i=r===void 0?[]:[new u().fromBufferAttribute(r,t),new u().fromBufferAttribute(r,t+1),new u().fromBufferAttribute(r,t+2)],o={a:t,b:t+1,c:t+2,normals:i};f.push(o)}const h={},p=[],a=[];for(let t=0,i=s.length;t<i;t++){const o=s[t],c=Math.round(o.x*100)+"_"+Math.round(o.y*100)+"_"+Math.round(o.z*100);h[c]===void 0?(h[c]=t,p.push(new d(s[t].x,s[t].y,s[t].z)),a[t]=p.length-1):a[t]=a[h[c]]}const m=[];for(let t=0,i=f.length;t<i;t++){const o=f[t];o.a=a[o.a],o.b=a[o.b],o.c=a[o.c];const c=[o.a,o.b,o.c];for(let l=0;l<3;l++)if(c[l]===c[(l+1)%3]){m.push(t);break}}for(let t=m.length-1;t>=0;t--){const i=m[t];f.splice(i,1)}const v=f.map(function(t){return[t.a,t.b,t.c]});return new w({vertices:p,faces:v})}static offsetCenterOfMass(n,e){n.shapeOffsets.forEach(function(s){e.vadd(s,e)}),e.scale(1/n.shapes.length,e),n.shapeOffsets.forEach(function(s){s.vsub(e,s)});const r=new d;n.vectorToWorldFrame(e,r),n.position.vadd(r,n.position)}}export{A as C};
