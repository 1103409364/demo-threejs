/* empty css              */import{S as T,A as q,J as H,a0 as z,P as I,W as R,bb as j,ap as O,i as x,p as B,a as K,r as Q,F as D,aZ as N,a9 as U,g as V,aa as X,bc as J,Q as Y,a_ as Z}from"./three.module-d5fa3ebf.js";import{O as _}from"./OrbitControls-5742bab2.js";import{S as $}from"./Stats-ef6ecf20.js";import{G as ee}from"./lil-gui.esm-fc0b5e43.js";import{G as te}from"./GLTFLoader-3c7b0d3d.js";import{T as M}from"./tween.module-848351b5.js";import{g as oe}from"./index-21dc82eb.js";const w=document.querySelector("#app"),a=document.querySelector("#progressBar"),p=new T;p.add(new q(5));const ne=new H(void 0,.1);p.add(ne);const l=new z;l.position.set(2.5,5,2.5);l.angle=Math.PI/8;l.penumbra=.5;l.castShadow=!0;l.shadow.mapSize.width=1024;l.shadow.mapSize.height=1024;l.shadow.camera.near=.5;l.shadow.camera.far=20;p.add(l);const d=new z;d.position.set(-2.5,5,2.5);d.angle=Math.PI/8;d.penumbra=.5;d.castShadow=!0;d.shadow.mapSize.width=1024;d.shadow.mapSize.height=1024;d.shadow.camera.near=.5;d.shadow.camera.far=20;p.add(d);const g=new I(75,window.innerWidth/window.innerHeight,.1,1e3);g.position.set(2,2,2);const i=new R;i.setSize(window.innerWidth,window.innerHeight);i.toneMapping=j;i.toneMappingExposure=.8;i.outputEncoding=O;i.shadowMap.enabled=!0;w==null||w.appendChild(i.domElement);const b=new _(g,i.domElement);b.screenSpacePanning=!0;b.target.set(0,1.1,0);const F=[],ae=new x(25,25),se=new B().load(oe("grid")),k=new K(ae,new Q({map:se}));k.rotateX(-Math.PI/2);k.receiveShadow=!0;p.add(k);F.push(k);let h,L=!1,s;const c=[];let r,E;const S=new te;S.load("/assets/models/Kachujin.glb",e=>{e.scene.traverse(t=>{if(t.isMesh){const n=t;n.receiveShadow=!0,n.castShadow=!0,n.frustumCulled=!1,n.geometry.computeVertexNormals();let o;(o=t.material)&&(o.transparent=!1,o.side=D),console.log(n.material)}}),h=new N(e.scene);const m=h.clipAction(e.animations[0]);c.push(m),y.add(A,"default"),r=c[0],p.add(e.scene),s=e.scene,S.load("/assets/models/Kachujin@kick.glb",t=>{console.log("loaded kick");const n=h.clipAction(t.animations[0]);c.push(n),y.add(A,"kick"),S.load("/assets/models/Kachujin@walking.glb",o=>{console.log("loaded walking"),o.animations[0].tracks.shift();const u=h.clipAction(o.animations[0]);c.push(u),y.add(A,"walking"),a&&(a.style.display="none"),L=!0},o=>{if(o.lengthComputable){const u=o.loaded/o.total*100;a&&(a.value=u),a&&(a.style.display="block")}console.log(o.loaded/o.total*100+"% loaded")},o=>{console.log(o)})},t=>{if(t.lengthComputable){const n=t.loaded/t.total*100;a&&(a.value=n),a&&(a.style.display="block")}console.log(t.loaded/t.total*100+"% loaded")},t=>{console.log(t)})},e=>{if(e.lengthComputable){const m=e.loaded/e.total*100;a&&(a.value=m),a&&(a.style.display="block")}console.log(e.loaded/e.total*100+"% loaded")},e=>{console.log(e)});window.addEventListener("resize",ie,!1);function ie(){g.aspect=window.innerWidth/window.innerHeight,g.updateProjectionMatrix(),i.setSize(window.innerWidth,window.innerHeight),G()}const v=new U,C=new Y;i.domElement.addEventListener("dblclick",le,!1);function le(e){const m={x:e.clientX/i.domElement.clientWidth*2-1,y:-(e.clientY/i.domElement.clientHeight)*2+1};v.setFromCamera(new V(m.x,m.y),g);const t=v.intersectObjects(F,!1);if(t.length>0){const n=t[0].point,o=s.position.distanceTo(n),u=new X;u.lookAt(n,s.position,s.up),C.setFromRotationMatrix(u),f(c[2],!0),M.removeAll(),new M.Tween(s.position).to({x:n.x,y:n.y,z:n.z},1e3/1.2*o).onUpdate(()=>{b.target.set(s.position.x,s.position.y+1,s.position.z),l.target=s,d.target=s}).start().onComplete(()=>f(c[1],!1))}}const W=new $;w==null||w.appendChild(W.dom);const A={default(){f(c[0],!0)},kick(){f(c[1],!0)},walking(){f(c[2],!0)}},f=(e,m)=>{e!=r&&(E=r,r=e,E.fadeOut(.1),r.reset(),r.fadeIn(.1),r.play(),m||(r.clampWhenFinished=!0,r.loop=J))},de=new ee,y=de.addFolder("Animations");y.open();const re=new Z;function P(){requestAnimationFrame(P),b.update();const e=re.getDelta();L&&(h.update(e),s.quaternion.equals(C)||s.quaternion.rotateTowards(C,e*10)),M.update(),G(),W.update()}function G(){i.render(p,g)}P();
