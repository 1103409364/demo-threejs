import{W as yt,S as Pt,X,i as St,r as C,a as w,ab as m,B as J,ac as Mt,b as K,bg as ft,g as o,c as kt,L as bt,d as vt,V as zt,P as Ct}from"./three.module-d5fa3ebf.js";function Gt(){const q=document.querySelector("#c");if(!q)return;const l=new yt({canvas:q});l.setClearColor(11184810),l.shadowMap.enabled=!0;function M(t=40){return new Ct(t,2,.1,1e3)}const G=M();G.position.set(8,4,10).multiplyScalar(3),G.lookAt(0,0,0);const a=new Pt;{const t=new X(16777215,1);t.position.set(0,20,0),a.add(t),t.castShadow=!0,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048;const e=50;t.shadow.camera.left=-e,t.shadow.camera.right=e,t.shadow.camera.top=e,t.shadow.camera.bottom=-e,t.shadow.camera.near=1,t.shadow.camera.far=50,t.shadow.bias=.001}{const t=new X(16777215,1);t.position.set(1,2,4),a.add(t)}const Q=new St(50,50),U=new C({color:13404262}),x=new w(Q,U);x.rotation.x=Math.PI*-.5,x.receiveShadow=!0,a.add(x);const s=4,r=1,c=8,g=new m;a.add(g);const Y=new J(s,r,c),A=new C({color:6719658}),i=new w(Y,A);i.position.y=1.4,i.castShadow=!0,g.add(i);const u=M(75);u.position.y=3,u.position.z=-6,u.rotation.y=Math.PI,i.add(u);const j=1,d=.5,Z=6,_=new Mt(j,j,d,Z),$=new C({color:8947848}),tt=[[-s/2-d/2,-r/2,c/3],[s/2+d/2,-r/2,c/3],[-s/2-d/2,-r/2,0],[s/2+d/2,-r/2,0],[-s/2-d/2,-r/2,-c/3],[s/2+d/2,-r/2,-c/3]].map(t=>{const e=new w(_,$);return e.position.set(...t),e.rotation.z=Math.PI*.5,e.castShadow=!0,i.add(e),e}),et=2,ot=12,nt=12,at=0,st=Math.PI*2,rt=0,ct=Math.PI*.5,it=new K(et,ot,nt,at,st,rt,ct),L=new w(it,A);L.castShadow=!0,i.add(L),L.position.y=.5;const dt=.1,ht=.1,D=c*.75*.2,wt=new J(dt,ht,D),f=new w(wt,A),p=new m;f.castShadow=!0,p.scale.set(5,5,5),p.position.y=.5,f.position.z=D*.5,p.add(f),i.add(p);const k=M();k.position.y=.75*.2,f.add(k);const mt=new K(.5,6,3),W=new C({color:65280,flatShading:!0}),y=new w(mt,W),E=new m,b=new m,v=new m;y.castShadow=!0,a.add(E),E.add(b),b.position.z=c*2,b.position.y=8,b.add(v),v.add(y);const P=M(),F=new m;P.position.y=1,P.position.z=-2,P.rotation.y=Math.PI,v.add(F),F.add(P);const H=new ft([new o(-10,0),new o(-5,5),new o(0,0),new o(5,-5),new o(10,0),new o(5,10),new o(-5,10),new o(-10,-10),new o(-15,-8),new o(-10,0)]),lt=H.getPoints(50),gt=new kt().setFromPoints(lt),ut=new bt({color:16711680}),I=new vt(gt,ut);I.rotation.x=Math.PI*.5,I.position.y=.05,a.add(I);function pt(t){const e=t.domElement,h=e.clientWidth,n=e.clientHeight,z=e.width!==h||e.height!==n;return z&&t.setSize(h,n,!1),z}const S=new zt,T=new o,B=new o,R=[{cam:G,desc:"detached camera"},{cam:k,desc:"on turret looking at target"},{cam:P,desc:"near target looking at tank"},{cam:u,desc:"above back of tank"}],O=document.querySelector("#info");function V(t){if(console.log(t),t*=.001,pt(l)){const n=l.domElement;R.forEach(z=>{const N=z.cam;N.aspect=n.clientWidth/n.clientHeight,N.updateProjectionMatrix()})}E.rotation.y=t*.27,v.position.y=Math.sin(t*2)*4,y.rotation.x=t*7,y.rotation.y=t*13,W.emissive.setHSL(t*10%1,1,.25),W.color.setHSL(t*10%1,1,.25);const e=t*.05;H.getPointAt(e%1,T),H.getPointAt((e+.01)%1,B),g.position.set(T.x,0,T.y),g.lookAt(B.x,0,B.y),y.getWorldPosition(S),p.lookAt(S),k.lookAt(S),g.getWorldPosition(S),F.lookAt(S),tt.forEach(n=>{n.rotation.x=t*3});const h=R[t*.25%R.length|0];O&&(O.textContent=h.desc),l.render(a,h.cam),requestAnimationFrame(V)}requestAnimationFrame(V)}Gt();
