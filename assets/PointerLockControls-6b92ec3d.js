import{V as c,E as m,a7 as a}from"./three.module-d5fa3ebf.js";const n=new a(0,0,0,"YXZ"),i=new c,h={type:"change"},l={type:"lock"},d={type:"unlock"},s=Math.PI/2;class p extends m{constructor(o,e){super(),this.camera=o,this.domElement=e,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,this._onMouseMove=u.bind(this),this._onPointerlockChange=E.bind(this),this._onPointerlockError=k.bind(this),this.connect()}connect(){this.domElement.ownerDocument.addEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this._onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this._onPointerlockError)}dispose(){this.disconnect()}getObject(){return this.camera}getDirection(o){return o.set(0,0,-1).applyQuaternion(this.camera.quaternion)}moveForward(o){const e=this.camera;i.setFromMatrixColumn(e.matrix,0),i.crossVectors(e.up,i),e.position.addScaledVector(i,o)}moveRight(o){const e=this.camera;i.setFromMatrixColumn(e.matrix,0),e.position.addScaledVector(i,o)}lock(){this.domElement.requestPointerLock()}unlock(){this.domElement.ownerDocument.exitPointerLock()}}function u(t){if(this.isLocked===!1)return;const o=t.movementX||t.mozMovementX||t.webkitMovementX||0,e=t.movementY||t.mozMovementY||t.webkitMovementY||0,r=this.camera;n.setFromQuaternion(r.quaternion),n.y-=o*.002*this.pointerSpeed,n.x-=e*.002*this.pointerSpeed,n.x=Math.max(s-this.maxPolarAngle,Math.min(s-this.minPolarAngle,n.x)),r.quaternion.setFromEuler(n),this.dispatchEvent(h)}function E(){this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(l),this.isLocked=!0):(this.dispatchEvent(d),this.isLocked=!1)}function k(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}export{p as P};
