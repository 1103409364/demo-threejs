/* empty css              */import{V as d,aY as H,aP as T,aa as V,bf as U,a6 as W,S as X,A as J,J as Z,P as _,W as K,B as Q,r as $,a as q,M as L,i as ee,a_ as te}from"./three.module-d5fa3ebf.js";import{S as ne}from"./Stats-ef6ecf20.js";import{G as se}from"./lil-gui.esm-fc0b5e43.js";import{O as ae}from"./OrbitControls-5742bab2.js";const s={c:null,u:[new d,new d,new d],e:[]},i={c:null,u:[new d,new d,new d],e:[]},l=[[],[],[]],t=[[],[],[]],c=[],S=new d,p=new d,z=new d,h=new d,C=new d,F=new d,f=new H,O=new T,B=new V,G=new V,E=new U;class M{constructor(e=new d,r=new d,n=new H){this.center=e,this.halfSize=r,this.rotation=n}set(e,r,n){return this.center=e,this.halfSize=r,this.rotation=n,this}copy(e){return this.center.copy(e.center),this.halfSize.copy(e.halfSize),this.rotation.copy(e.rotation),this}clone(){return new this.constructor().copy(this)}getSize(e){return e.copy(this.halfSize).multiplyScalar(2)}clampPoint(e,r){const n=this.halfSize;h.subVectors(e,this.center),this.rotation.extractBasis(S,p,z),r.copy(this.center);const o=W.clamp(h.dot(S),-n.x,n.x);r.add(S.multiplyScalar(o));const a=W.clamp(h.dot(p),-n.y,n.y);r.add(p.multiplyScalar(a));const m=W.clamp(h.dot(z),-n.z,n.z);return r.add(z.multiplyScalar(m)),r}containsPoint(e){return h.subVectors(e,this.center),this.rotation.extractBasis(S,p,z),Math.abs(h.dot(S))<=this.halfSize.x&&Math.abs(h.dot(p))<=this.halfSize.y&&Math.abs(h.dot(z))<=this.halfSize.z}intersectsBox3(e){return this.intersectsOBB(ie.fromBox3(e))}intersectsSphere(e){return this.clampPoint(e.center,F),F.distanceToSquared(e.center)<=e.radius*e.radius}intersectsOBB(e,r=Number.EPSILON){s.c=this.center,s.e[0]=this.halfSize.x,s.e[1]=this.halfSize.y,s.e[2]=this.halfSize.z,this.rotation.extractBasis(s.u[0],s.u[1],s.u[2]),i.c=e.center,i.e[0]=e.halfSize.x,i.e[1]=e.halfSize.y,i.e[2]=e.halfSize.z,e.rotation.extractBasis(i.u[0],i.u[1],i.u[2]);for(let a=0;a<3;a++)for(let m=0;m<3;m++)l[a][m]=s.u[a].dot(i.u[m]);h.subVectors(i.c,s.c),c[0]=h.dot(s.u[0]),c[1]=h.dot(s.u[1]),c[2]=h.dot(s.u[2]);for(let a=0;a<3;a++)for(let m=0;m<3;m++)t[a][m]=Math.abs(l[a][m])+r;let n,o;for(let a=0;a<3;a++)if(n=s.e[a],o=i.e[0]*t[a][0]+i.e[1]*t[a][1]+i.e[2]*t[a][2],Math.abs(c[a])>n+o)return!1;for(let a=0;a<3;a++)if(n=s.e[0]*t[0][a]+s.e[1]*t[1][a]+s.e[2]*t[2][a],o=i.e[a],Math.abs(c[0]*l[0][a]+c[1]*l[1][a]+c[2]*l[2][a])>n+o)return!1;return n=s.e[1]*t[2][0]+s.e[2]*t[1][0],o=i.e[1]*t[0][2]+i.e[2]*t[0][1],!(Math.abs(c[2]*l[1][0]-c[1]*l[2][0])>n+o||(n=s.e[1]*t[2][1]+s.e[2]*t[1][1],o=i.e[0]*t[0][2]+i.e[2]*t[0][0],Math.abs(c[2]*l[1][1]-c[1]*l[2][1])>n+o)||(n=s.e[1]*t[2][2]+s.e[2]*t[1][2],o=i.e[0]*t[0][1]+i.e[1]*t[0][0],Math.abs(c[2]*l[1][2]-c[1]*l[2][2])>n+o)||(n=s.e[0]*t[2][0]+s.e[2]*t[0][0],o=i.e[1]*t[1][2]+i.e[2]*t[1][1],Math.abs(c[0]*l[2][0]-c[2]*l[0][0])>n+o)||(n=s.e[0]*t[2][1]+s.e[2]*t[0][1],o=i.e[0]*t[1][2]+i.e[2]*t[1][0],Math.abs(c[0]*l[2][1]-c[2]*l[0][1])>n+o)||(n=s.e[0]*t[2][2]+s.e[2]*t[0][2],o=i.e[0]*t[1][1]+i.e[1]*t[1][0],Math.abs(c[0]*l[2][2]-c[2]*l[0][2])>n+o)||(n=s.e[0]*t[1][0]+s.e[1]*t[0][0],o=i.e[1]*t[2][2]+i.e[2]*t[2][1],Math.abs(c[1]*l[0][0]-c[0]*l[1][0])>n+o)||(n=s.e[0]*t[1][1]+s.e[1]*t[0][1],o=i.e[0]*t[2][2]+i.e[2]*t[2][0],Math.abs(c[1]*l[0][1]-c[0]*l[1][1])>n+o)||(n=s.e[0]*t[1][2]+s.e[1]*t[0][2],o=i.e[0]*t[2][1]+i.e[1]*t[2][0],Math.abs(c[1]*l[0][2]-c[0]*l[1][2])>n+o))}intersectsPlane(e){this.rotation.extractBasis(S,p,z);const r=this.halfSize.x*Math.abs(e.normal.dot(S))+this.halfSize.y*Math.abs(e.normal.dot(p))+this.halfSize.z*Math.abs(e.normal.dot(z)),n=e.normal.dot(this.center)-e.constant;return Math.abs(n)<=r}intersectRay(e,r){return this.getSize(C),O.setFromCenterAndSize(h.set(0,0,0),C),B.setFromMatrix3(this.rotation),B.setPosition(this.center),G.copy(B).invert(),E.copy(e).applyMatrix4(G),E.intersectBox(O,r)?r.applyMatrix4(B):null}intersectsRay(e){return this.intersectRay(e,h)!==null}fromBox3(e){return e.getCenter(this.center),e.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}equals(e){return e.center.equals(this.center)&&e.halfSize.equals(this.halfSize)&&e.rotation.equals(this.rotation)}applyMatrix4(e){const r=e.elements;let n=h.set(r[0],r[1],r[2]).length();const o=h.set(r[4],r[5],r[6]).length(),a=h.set(r[8],r[9],r[10]).length();e.determinant()<0&&(n=-n),f.setFromMatrix4(e);const D=1/n,A=1/o,R=1/a;return f.elements[0]*=D,f.elements[1]*=D,f.elements[2]*=D,f.elements[3]*=A,f.elements[4]*=A,f.elements[5]*=A,f.elements[6]*=R,f.elements[7]*=R,f.elements[8]*=R,this.rotation.multiply(f),this.halfSize.x*=n,this.halfSize.y*=o,this.halfSize.z*=a,h.setFromMatrixPosition(e),this.center.add(h),this}}const ie=new M,b=document.querySelector("#app"),x=new X;x.add(new J(5));const re=new Z;x.add(re);const y=new _(75,window.innerWidth/window.innerHeight,.1,1e3);y.position.set(.8,1.4,3);const g=new K;g.setSize(window.innerWidth,window.innerHeight);b==null||b.appendChild(g.domElement);const Y=new ae(y,g.domElement);Y.enableDamping=!0;const v=new Q(1,2,3);v.computeBoundingBox();const oe=new $,u=new q(v,oe);u.position.set(4,1,0);u.geometry.userData.obb=new M().fromBox3(u.geometry.boundingBox);u.userData.obb=new M;x.add(u);const w=new q(v,new L({color:65280,wireframe:!0}));w.position.set(-3,1,0);w.geometry.userData.obb=new M().fromBox3(w.geometry.boundingBox);w.userData.obb=new M;x.add(w);const j=new q(new ee(20,20,10,10),new L({color:11454159,wireframe:!0}));j.rotateX(-Math.PI/2);x.add(j);window.addEventListener("resize",ce,!1);function ce(){y.aspect=window.innerWidth/window.innerHeight,y.updateProjectionMatrix(),g.setSize(window.innerWidth,window.innerHeight),N()}const I=new ne;b==null||b.appendChild(I.dom);const le=new te;function k(){requestAnimationFrame(k),u.position.x=Math.sin(le.getElapsedTime()*.5)*4,Y.update(),u.userData.obb.copy(u.geometry.userData.obb),w.userData.obb.copy(w.geometry.userData.obb),u.userData.obb.applyMatrix4(u.matrixWorld),w.userData.obb.applyMatrix4(w.matrixWorld),u.userData.obb.intersectsOBB(w.userData.obb)?u.material.color.set(16711680):u.material.color.set(65280),u.rotateY(.01),w.rotateY(-.005),N(),I.update()}function N(){g.render(x,y)}function he(){const P=document.querySelector("#gui");if(!P)return;const r=new se({container:P}).addFolder("Camera");r.add(y.position,"x",-10,10,.01),r.add(y.position,"y",-10,10,.01),r.add(y.position,"z",-10,10,.01)}he();k();
