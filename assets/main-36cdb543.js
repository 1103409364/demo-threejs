/* empty css              */import{ag as C,an as F,ah as A,F as S,R as P,C as k,r as R,g as L,ao as T,p as G,ap as W,S as B,A as H,h as _,P as z,W as I}from"./three.module-d5fa3ebf.js";import{O as U}from"./OrbitControls-5742bab2.js";import{O as y}from"./OBJLoader-84dac0c0.js";import{S as q}from"./Stats-ef6ecf20.js";import{G as j}from"./lil-gui.esm-fc0b5e43.js";class E extends C{constructor(e){super(e)}load(e,t,l,s){const n=this,d=this.path===""?F.extractUrlBase(e):this.path,o=new A(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(n.parse(a,d))}catch(r){s?s(r):console.error(r),n.manager.itemError(e)}},l,s)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const l=e.split(`
`);let s={};const n=/\s+/,d={};for(let a=0;a<l.length;a++){let r=l[a];if(r=r.trim(),r.length===0||r.charAt(0)==="#")continue;const c=r.indexOf(" ");let p=c>=0?r.substring(0,c):r;p=p.toLowerCase();let m=c>=0?r.substring(c+1):"";if(m=m.trim(),p==="newmtl")s={name:m},d[m]=s;else if(p==="ka"||p==="kd"||p==="ks"||p==="ke"){const w=m.split(n,3);s[p]=[parseFloat(w[0]),parseFloat(w[1]),parseFloat(w[2])]}else s[p]=m}const o=new D(this.resourcePath||t,this.materialOptions);return o.setCrossOrigin(this.crossOrigin),o.setManager(this.manager),o.setMaterials(d),o}}class D{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:S,this.wrap=this.options.wrap!==void 0?this.options.wrap:P}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const l in e){const s=e[l],n={};t[l]=n;for(const d in s){let o=!0,a=s[d];const r=d.toLowerCase();switch(r){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(a=[a[0]/255,a[1]/255,a[2]/255]),this.options&&this.options.ignoreZeroRGBs&&a[0]===0&&a[1]===0&&a[2]===0&&(o=!1);break}o&&(n[r]=a)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return this.materials[e]===void 0&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,l=this.materialsInfo[e],s={name:e,side:this.side};function n(o,a){return typeof a!="string"||a===""?"":/^https?:\/\//i.test(a)?a:o+a}function d(o,a){if(s[o])return;const r=t.getTextureParams(a,s),c=t.loadTexture(n(t.baseUrl,r.url));c.repeat.copy(r.scale),c.offset.copy(r.offset),c.wrapS=t.wrap,c.wrapT=t.wrap,(o==="map"||o==="emissiveMap")&&(c.encoding=W),s[o]=c}for(const o in l){const a=l[o];let r;if(a!=="")switch(o.toLowerCase()){case"kd":s.color=new k().fromArray(a).convertSRGBToLinear();break;case"ks":s.specular=new k().fromArray(a).convertSRGBToLinear();break;case"ke":s.emissive=new k().fromArray(a).convertSRGBToLinear();break;case"map_kd":d("map",a);break;case"map_ks":d("specularMap",a);break;case"map_ke":d("emissiveMap",a);break;case"norm":d("normalMap",a);break;case"map_bump":case"bump":d("bumpMap",a);break;case"map_d":d("alphaMap",a),s.transparent=!0;break;case"ns":s.shininess=parseFloat(a);break;case"d":r=parseFloat(a),r<1&&(s.opacity=r,s.transparent=!0);break;case"tr":r=parseFloat(a),this.options&&this.options.invertTrProperty&&(r=1-r),r>0&&(s.opacity=1-r,s.transparent=!0);break}}return this.materials[e]=new R(s),this.materials[e]}getTextureParams(e,t){const l={scale:new L(1,1),offset:new L(0,0)},s=e.split(/\s+/);let n;return n=s.indexOf("-bm"),n>=0&&(t.bumpScale=parseFloat(s[n+1]),s.splice(n,2)),n=s.indexOf("-s"),n>=0&&(l.scale.set(parseFloat(s[n+1]),parseFloat(s[n+2])),s.splice(n,4)),n=s.indexOf("-o"),n>=0&&(l.offset.set(parseFloat(s[n+1]),parseFloat(s[n+2])),s.splice(n,4)),l.url=s.join(" ").trim(),l}loadTexture(e,t,l,s,n){const d=this.manager!==void 0?this.manager:T;let o=d.getHandler(e);o===null&&(o=new G(d)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin);const a=o.load(e,l,s,n);return t!==void 0&&(a.mapping=t),a}}const u=document.querySelector("#app"),f=new B;f.add(new H(5));const M=new _;M.position.set(2.5,7.5,15);f.add(M);const h=new z(75,window.innerWidth/window.innerHeight,.1,1e3);h.position.z=3;const g=new I;g.setSize(window.innerWidth,window.innerHeight);u==null||u.appendChild(g.domElement);const x=new U(h,g.domElement);x.enableDamping=!0;const O=new E;O.load("/assets/models/monkey.mtl",i=>{i.preload();const e=new y;e.setMaterials(i),e.load("/assets/models/monkey.obj",t=>{t.position.x=-1.5,f.add(t)},t=>{console.log(t.loaded/t.total*100+"% loaded")},t=>{console.log("An error happened",t)})},i=>{console.log(i.loaded/i.total*100+"% loaded")},i=>{console.log("An error happened",i)});O.load("/assets/models/monkeyTextured.mtl",i=>{i.preload();const e=new y;e.setMaterials(i),e.load("/assets/models/monkeyTextured.obj",t=>{t.position.x=1.5,f.add(t)},t=>{console.log(t.loaded/t.total*100+"% loaded")},t=>{console.log("An error happened",t)})},i=>{console.log(i.loaded/i.total*100+"% loaded")},i=>{console.log("An error happened",i)});window.addEventListener("resize",V,!1);const J=Z();K();b();v();function v(){requestAnimationFrame(v),x.update(),J.update(),b()}function b(){g.render(f,h)}function V(){h.aspect=window.innerWidth/window.innerHeight,h.updateProjectionMatrix(),g.setSize(window.innerWidth,window.innerHeight),b()}function Z(){const i=new q;return u==null||u.appendChild(i.dom),i}function K(){const i=document.querySelector("#gui");if(!i)return;const t=new j({container:i}).addFolder("Camera");t.add(h.position,"x",-10,10,.01),t.add(h.position,"y",-10,10,.01),t.add(h.position,"z",-10,10,.01)}
